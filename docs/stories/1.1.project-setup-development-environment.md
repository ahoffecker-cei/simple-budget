# Story 1.1: Project Setup & Development Environment

## Status
Approved - Complete

## Story
**As a** developer,
**I want** complete project scaffolding with Angular frontend and ASP.NET Core backend,
**so that** I have a working development environment ready for feature implementation.

## Acceptance Criteria
1. Angular 15+ project created with TypeScript, Angular Material, and PWA capabilities configured
2. ASP.NET Core Web API project with Entity Framework Core and SQL Server LocalDB configured
3. Shared DTOs/models between frontend and backend established
4. Git repository initialized with proper .gitignore and README documentation
5. Development scripts (npm start, dotnet run) work without manual configuration steps
6. Basic project structure follows separation of concerns (data, business logic, API, UI layers)

## Tasks / Subtasks
- [x] Setup monorepo structure with npm workspaces (AC: 6)
  - [x] Create `/apps/web` directory for Angular frontend
  - [x] Create `/apps/api` directory for ASP.NET Core backend
  - [x] Create `/shared` directory for TypeScript interfaces and constants
  - [x] Configure root package.json with workspace configuration
- [x] Initialize Angular 15+ frontend project (AC: 1)
  - [x] Run `ng new` with TypeScript configuration in apps/web
  - [x] Install and configure Angular Material UI library
  - [x] Configure PWA service worker capabilities
  - [x] Set up routing module for future navigation
- [x] Initialize ASP.NET Core Web API backend (AC: 2)
  - [x] Create new ASP.NET Core Web API project in apps/api
  - [x] Install Entity Framework Core packages
  - [x] Configure connection string for SQL Server LocalDB
  - [x] Create initial DbContext class
- [x] Establish shared DTOs/models (AC: 3)
  - [x] Create TypeScript interfaces in /shared directory
  - [x] Create corresponding C# model classes in backend
  - [x] Set up build process to share type definitions
- [x] Initialize Git repository with proper configuration (AC: 4)
  - [x] Run `git init` and create comprehensive .gitignore
  - [x] Create README.md with setup instructions
  - [x] Document development workflow and environment setup
- [x] Configure development scripts and environment (AC: 5)
  - [x] Create npm scripts for frontend development (npm start)
  - [x] Configure backend development command (dotnet run)
  - [x] Set up environment variables and configuration files
  - [x] Verify cross-platform compatibility (Windows/Mac/Linux)
- [x] Unit testing setup and validation based on testing strategy
  - [x] Configure Jest + Angular Testing Utilities for frontend
  - [x] Configure xUnit + ASP.NET Test Host for backend
  - [x] Create sample test files to verify testing framework works
  - [x] Execute comprehensive environment validation tests (see Dev Notes for criteria)

## Dev Notes

### Previous Story Insights
No previous story exists - this is the foundation story.

### Technology Stack Details
[Source: architecture/technology-stack-table.md]
- **Frontend**: Angular 15+, TypeScript 5.0+, Angular Material 15+, RxJS for state management
- **Backend**: ASP.NET Core 8.0, C# .NET 8, Entity Framework Core 8
- **Database**: SQL Server LocalDB for development, SQL Server 2022 for production
- **Authentication**: JWT + ASP.NET Identity
- **Testing**: Jest + Angular Testing Utilities (frontend), xUnit + ASP.NET Test Host (backend)
- **Build Tools**: Angular CLI, .NET CLI

### Repository Structure
[Source: architecture/repository-structure.md]
- **Monorepo Tool**: npm workspaces (simpler than Nx/Turborepo for this scope)
- **Package Organization**: 
  - `/apps/web` (Angular frontend)
  - `/apps/api` (ASP.NET Core backend)  
  - `/shared` (TypeScript interfaces, constants)

### Development Environment Configuration
[Source: architecture/development-workflow.md#local-development-setup]
**Prerequisites:**
- Node.js v18+
- npm v9+
- .NET 8.0+
- Git 2.30+

### Data Models for Shared DTOs
[Source: architecture/user.md, architecture/account.md]
**User TypeScript Interface:**
```typescript
export interface User {
  userId: string;
  email: string;
  firstName: string;
  monthlyIncome: number;
  studentLoanPayment: number;
  studentLoanBalance: number;
  createdAt: string;
  lastLoginAt: string;
}
```

**Account TypeScript Interface:**
```typescript
export enum AccountType {
  Checking = 'checking',
  Savings = 'savings',
  Retirement = 'retirement'
}

export interface Account {
  accountId: string;
  userId: string;
  accountType: AccountType;
  accountName: string;
  currentBalance: number;
  lastUpdated: string;
}
```

### API Specifications
[Source: architecture/rest-api-specification.md]
- **Base URL Development**: https://localhost:5001/api/v1
- **Base URL Production**: https://simplebudget-api.azurewebsites.net/api/v1
- **API Style**: REST with OpenAPI 3.0 specification
- **Authentication**: JWT Bearer tokens

### Deployment Configuration Requirements
[Source: architecture/deployment-strategy.md, architecture/environments.md]
- **Frontend Deployment**: Azure Static Web Apps, build command `npm run build:prod`, output directory `apps/web/dist`
- **Backend Deployment**: Azure App Service Linux Basic B1, build command `dotnet publish -c Release -o out`
- **Development URLs**: Frontend http://localhost:4200, Backend https://localhost:5001

### Project Structure Alignment Notes
The monorepo structure aligns perfectly with AC #6 separation of concerns:
- **UI Layer**: `/apps/web` (Angular frontend)
- **API Layer**: `/apps/api` (ASP.NET Core Web API)
- **Business Logic Layer**: Within `/apps/api` service classes
- **Data Layer**: Entity Framework within `/apps/api`
- **Shared Layer**: `/shared` for common TypeScript interfaces

### Testing
[Source: architecture/technology-stack-table.md]
**Testing Standards:**
- **Frontend Testing**: Jest + Angular Testing Utilities for unit and integration testing
- **Backend Testing**: xUnit + ASP.NET Test Host for API and business logic testing
- **Test Location**: Tests should be co-located with source files using `.spec.ts` (frontend) and `.Tests.cs` (backend) naming conventions
- **Testing Framework Setup**: Both testing frameworks should be configured during initial project setup

**Environment Validation Test Criteria:**
The development environment setup must pass all of these validation tests to be considered complete:

1. **Frontend Environment Validation:**
   - `npm install` completes successfully from root directory
   - `npm start` launches Angular dev server on http://localhost:4200
   - Angular welcome page loads successfully in browser
   - Sample component test runs successfully with `npm test`
   - PWA service worker registers without errors in browser dev tools
   - Angular Material components can be imported and used
   
2. **Backend Environment Validation:**
   - `dotnet restore` completes successfully in /apps/api
   - `dotnet run` launches API server on https://localhost:5001
   - API health endpoint returns 200 OK response
   - Entity Framework can create database and run initial migration
   - Sample controller test runs successfully with `dotnet test`
   - LocalDB connection string works correctly

3. **Integration Environment Validation:**
   - Frontend can make HTTP requests to backend API endpoints
   - Shared TypeScript interfaces compile without errors
   - Both frontend and backend can start simultaneously without port conflicts
   - Git repository is properly initialized with all files committed
   - README.md setup instructions work for fresh repository clone

4. **Cross-Platform Validation (if applicable):**
   - All npm and dotnet commands work on target platform
   - File paths work correctly (Windows vs Unix path separators)
   - Environment variables are properly configured for platform

### Technical Constraints
[Source: architecture/platform-and-infrastructure-choice.md]
- **Monthly Budget**: ~$200-400 for Azure services
- **Platform Lock-in**: Microsoft ecosystem (Azure, .NET, SQL Server)
- **Performance Requirements**: Dashboard must load in under 2 seconds (NFR1)
- **Cross-platform**: Must work on Windows, Mac, and Linux development environments

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-08-08 | 1.0 | Initial story creation | Bob (Scrum Master) |
| 2025-08-08 | 1.1 | Added comprehensive environment validation test criteria | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
claude-sonnet-4-20250514

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
- Monorepo structure created with npm workspaces supporting Angular frontend and ASP.NET Core backend
- Angular 20+ project initialized with Material UI, PWA support, and TypeScript configuration
- ASP.NET Core Web API with Entity Framework Core 9 and SQL Server LocalDB configured
- Shared TypeScript interfaces established for User and Account models with corresponding C# classes
- Git repository initialized with comprehensive .gitignore covering both Node.js and .NET patterns
- Development scripts configured in root package.json for easy frontend/backend management
- Testing frameworks configured: Jest + Angular Testing Utilities (frontend), xUnit + ASP.NET Test Host (backend)
- Environment configuration files created for development and production
- CORS configured for frontend-backend communication
- All acceptance criteria met and validated through testing

### File List
- package.json (root workspace configuration)
- .gitignore (comprehensive Git ignore rules)
- README.md (setup instructions and documentation)
- .env.example (environment variables template)
- shared/package.json (shared TypeScript package)
- shared/tsconfig.json (TypeScript configuration for shared package)
- shared/src/index.ts (shared package entry point)
- shared/src/models/user.ts (User TypeScript interface)
- shared/src/models/account.ts (Account TypeScript interface)
- shared/src/models/index.ts (models export file)
- apps/web/ (Angular frontend with Material UI and PWA)
- apps/web/src/styles.scss (Angular Material theme configuration)
- apps/web/src/environments/environment.ts (development environment config)
- apps/web/src/environments/environment.prod.ts (production environment config)
- apps/web/src/app/services/api.service.ts (HTTP API service)
- apps/web/src/app/services/api.service.spec.ts (API service tests)
- apps/web/angular.json (Angular CLI configuration)
- apps/web/ngsw-config.json (PWA service worker configuration)
- apps/api/ (ASP.NET Core backend directory)
- apps/api/Program.cs (ASP.NET Core application entry point)
- apps/api/appsettings.json (API configuration)
- apps/api/appsettings.Development.json (development API configuration)
- apps/api/Data/ApplicationDbContext.cs (Entity Framework DbContext)
- apps/api/Models/User.cs (User C# model)
- apps/api/Models/Account.cs (Account C# model)
- apps/api/Controllers/UsersController.cs (Users API controller)
- apps/api.Tests/ (xUnit test project)
- apps/api.Tests/SimpleTests.cs (model unit tests)
- apps/api.Tests/UnitTest1.cs (controller integration tests)

## QA Results
*Results from QA Agent QA review of the completed story implementation*